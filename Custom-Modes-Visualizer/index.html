<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>custom-modes-visualizer</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <!-- Ko-fi Donation Widget with Close Button -->
    <script>
      // Load Ko-fi widget after 30 seconds
      setTimeout(function() {
        var script = document.createElement('script');
        script.src = 'https://storage.ko-fi.com/cdn/scripts/overlay-widget.js';
        script.onload = function() {
          // Initialize Ko-fi widget
          kofiWidgetOverlay.draw('jamescherished', {
            'type': 'floating-chat',
            'floating-chat.donateButton.text': 'Thank me!',
            'floating-chat.donateButton.background-color': '#00b9fe',
            'floating-chat.donateButton.text-color': '#fff'
          });
      
          // Add close button and auto-hide after widget renders
          setTimeout(function() {
            // Create fixed close button at bottom-left
            var closeBtn = document.createElement('button');
            closeBtn.type = 'button';
            closeBtn.innerHTML = 'Ã—';
            closeBtn.setAttribute('aria-label', 'Close donation widget');
            closeBtn.title = 'Close donation widget';
            closeBtn.style.cssText = `
              position: fixed;
              bottom: calc(28px);
              left: 20px;
              width: 20px;
              height: 20px;
              background-color: #00b9fe;
              color: white;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              z-index: 10001;
              font-size: 14px;
              font-weight: bold;
              display: flex;
              align-items: center;
              justify-content: center;
              padding: 0;
            `;
            
            // Close button removes all Ko-fi elements
            closeBtn.onclick = function() {
              ['.floatingchat-container-wrap', '.floating-chat-kofi-popup-iframe', 'iframe[src*="ko-fi.com"]']
                .forEach(sel => document.querySelectorAll(sel).forEach(el => el.remove()));
              closeBtn.remove();
            };
            
            document.body.appendChild(closeBtn);
      
            // Auto-hide after 30 seconds
            setTimeout(function() {
              document.querySelectorAll('.floatingchat-container-wrap, .floating-chat-kofi-popup-iframe, iframe[src*="ko-fi.com"]')
                .forEach(el => el.remove());
              closeBtn.remove();
            }, 30000);
          }, 1000);
        };
        document.head.appendChild(script);
      }, 30000);
    </script>
  </body>
</html>
